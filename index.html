<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lever</title>
    <link rel="icon" href="./images/favicon.svg">
    <link rel="stylesheet" href="cotizar.css" />
    <link rel="stylesheet" href="cotizarTabletDesktop.css" />
    <link rel="stylesheet" href="pantallasChicas.css" />
    <link rel="stylesheet" href="loginModal.css" />
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
/* MODAL OVERLAY Y CONTENT IGUAL QUE LOGIN.CSS */
body.modal-bloqueado > *:not(.modal-overlay-perfil):not(.modal-seguro-liberado-overlay) {
  pointer-events: none !important;
  user-select: none !important;
  /* Opcional: puedes agregar un filtro para dar feedback visual */
  /* filter: blur(1px); */
}
body.modal-bloqueado {
  overflow: hidden;
}

@keyframes modalIn {
    from {
        transform: translateY(-40px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}
.switch-label-right {
  opacity: 0.5;
  pointer-events: none;
  cursor: not-allowed;
}
.modal-close {
    position: absolute;
    top: 12px;
    right: 12px;
    background: none;
    border: none;
    font-size: 1.5em;
    color: #888;
    cursor: pointer;
    transition: color 0.2s;
}
.modal-overlay-perfil {
    pointer-events: auto;
}
body.modal-bloqueado {
    overflow: hidden;
}
.modal-close:hover {
    color: #222;
}
.modal-message {
    margin-top: 1em;
    font-size: 1em;
    min-height: 1.2em;
}
.btn-primary {
    color: #fff;
    border: none;
    padding: 0.7em 1.5em;
    border-radius: 6px;
    font-size: 1em;
    cursor: pointer;
    margin-top: 1em;
    background: #2adc9f;
    transition: background 0.2s;
}
.btn-primary:hover {
    background: #00f09c;
}
.input_box label {
    display: block;
    font-weight: bold;
    margin-bottom: 4px;
    margin-top: 22px;
    text-align: left;
    margin-left: 13px;
}
.input_box input {
    width: 81%;
    height: 40px;
    border: 1px solid #DADAF2;
    outline: none;
    background: #F8F8FB;
    font-size: 17px;
    padding: 0px 20px;
    transition: 0.2s ease;
    margin-bottom: 8px;
}
.input_box input:focus {
    border-color: #626cd6;
}
@media (max-width: 600px) {
   
    
    .input_box label {
        margin-top: 14px;
        font-size: 15px;
    }
    .input_box input {
        font-size: 15px;
        height: 36px;
        padding: 0 12px;
        width: 90%;
    }
    .btn-primary {
        font-size: 13px;
        height: 38px;
        margin-left: 84px;
    }
}

.modal-overlay-perfil {
    display: flex !important;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.5);
    align-items: center;
    justify-content: center;
}
.modal-content-perfil {
    background: #fff;
    border-radius: 12px;
    padding: 2em 2em 1.5em 2em;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.18);
    max-width: 350px;
    width: 90vw;
    position: relative;
    text-align: center;
    animation: modalIn 0.2s;
}
@media (max-width: 600px) {
    .modal-content-perfil {
        padding: 1.2em 0.7em 1em 0.7em;
        max-width: 88vw;
    }
}
/* loginModal.css o tu CSS principal */
.search-icon-container.disabled {
  opacity: 0.5;
  pointer-events: none;
  cursor: default;
}

</style>
<script>
  
  // Si no hay usuario logueado, redirige a login.html
   console.log("Script de redirección cargado");
  
</script>
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    
  </head>
  <body>
    <!-- Popup de login Google -->

    <canvas id="particle-canvas"></canvas>
    <header>
      <div class="container header-container">
        <div itemprop="logo" class="logo-container">
          <a href="" onclick="goToStep(1)"
            ><img src="./images/logos/lever.svg" alt="Lever Technology"
          /></a>
        </div>
        <!-- Agrupa los botones en un contenedor para stacking y posición -->
        <div class="desktop-header-buttons">
          <button
            type="button"
            class="desktop-inicio-btn"
            onclick="limpiarFormularioPantalla1();resetearFormulariosPantalla2();limpiarFormularioPantalla3();goToStep(1);window.scrollTo(0,0);document.body.classList.remove('nosotros-cotizar-activo');document.querySelectorAll('main > section').forEach(function(sec){sec.classList.add('hidden');});document.getElementById('cotizar').classList.remove('hidden');"
          >
            <span class="desktop-inicio-btn-icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="17"
                height="16"
                viewBox="0 0 17 16"
              >
                <path
                  id="Vector"
                  d="M16.648,7.869,8.924.175a.6.6,0,0,0-.848,0L.353,7.869A1.2,1.2,0,0,0,1.2,9.912h.814V15.4a.6.6,0,0,0,.6.6H7.3V11.813H9.4V16h4.986a.6.6,0,0,0,.6-.6V9.912H15.8a1.2,1.2,0,0,0,.848-2.043Z"
                  fill="#fff"
                />
              </svg>
            </span>
            <span class="desktop-inicio-btn-text">
              Inicio</span>
          </button>
          <button
            type="button"
            class="desktop-nosotros-btn"
            onclick="mostrarNosotrosCotizar()"
          >
            <span class="desktop-nosotros-btn-icon">
              <svg
                id="Grupo_2625"
                data-name="Grupo 2625"
                xmlns="http://www.w3.org/2000/svg"
                width="22.767"
                height="22.767"
                viewBox="0 0 22.767 22.767"
              >
                <g clip-path="url(#clip-path)">
                  <defs>
                    <clipPath id="clip-path">
                      <rect width="22.767" height="22.767" fill="#15224f" />
                    </clipPath>
                  </defs>
                  <path
                    d="M11.384,0A11.384,11.384,0,1,0,22.767,11.384,11.384,11.384,0,0,0,11.384,0m3.037,6.83A1.517,1.517,0,1,1,12.9,8.347,1.517,1.517,0,0,1,14.421,6.83m-6.072,0A1.517,1.517,0,1,1,6.832,8.347,1.517,1.517,0,0,1,8.349,6.83m9.015,7.852a6.808,6.808,0,0,1-11.338.945c-.362-.457-.977-1.209-.459-1.761a.818.818,0,0,1,.35-.2c.753-.142.905.508,1.274.981a5.327,5.327,0,0,0,8.366.026c.22-.281.524-.908.854-1a.756.756,0,0,1,.953,1"
                    fill="#15224f"
                  />
                </g>
              </svg>
            </span>
            <span class="desktop-nosotros-btn-text">Nosotros</span>
          </button>
          <img
            src="./images/cerrarSesion.svg" 
            alt="Cerrar sesión" 
            id="cerrar-sesion-btn-header"
            style="width:33px; height:40px; cursor:pointer;     margin-right: 42px;
            margin-left: -16px; filter: invert(59%) sepia(94%) saturate(477%) hue-rotate(104deg) brightness(97%) contrast(92%);"
          />

          <span id="user-icon-header" style="display:none; cursor:pointer;     margin-right: 32px;">
             <!-- SVG de usuario -->
             <svg xmlns="http://www.w3.org/2000/svg" width="60" height="48" viewBox="0 0 48 48" fill="none" style="
               margin-left: -29px;
               margin-top: -4px;
               ">
               <path fill-rule="evenodd" clip-rule="evenodd" d="M24 42C33.9411 42 42 33.9411 42 24C42 14.0589 33.9411 6 24 6C14.0589 6 6 14.0589 6 24C6 33.9411 14.0589 42 24 42ZM24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z" fill="#fff"/>
               <path d="M12 35.6309C12 34.5972 12.772 33.7241 13.7995 33.6103C21.515 32.7559 26.5206 32.8325 34.218 33.6287C35.2324 33.7337 36 34.5918 36 35.6116C36 36.1807 35.7551 36.7275 35.3262 37.1014C26.2414 45.0195 21.0488 44.9103 12.6402 37.1087C12.2306 36.7286 12 36.1897 12 35.6309Z" fill="#fff"/>
               <path fill-rule="evenodd" clip-rule="evenodd" d="M34.1151 34.6234C26.4784 33.8334 21.5449 33.7587 13.9095 34.6042C13.3954 34.6612 13 35.1002 13 35.6309C13 35.9171 13.1187 36.1885 13.3204 36.3757C17.4879 40.2423 20.6461 41.9887 23.7333 41.9999C26.8309 42.0113 30.1592 40.2783 34.6691 36.3476C34.8767 36.1667 35 35.8964 35 35.6116C35 35.0998 34.6154 34.6752 34.1151 34.6234ZM13.6894 32.6164C21.4852 31.7531 26.5628 31.8315 34.3209 32.6341C35.8495 32.7922 37 34.0838 37 35.6116C37 36.465 36.6336 37.2884 35.9832 37.8553C31.4083 41.8426 27.598 44.0141 23.726 43.9999C19.8435 43.9857 16.2011 41.7767 11.9601 37.8418C11.3425 37.2688 11 36.4624 11 35.6309C11 34.0943 12.1487 32.787 13.6894 32.6164Z" fill="#fff"/>
               <path d="M32 20C32 24.4183 28.4183 28 24 28C19.5817 28 16 24.4183 16 20C16 15.5817 19.5817 12 24 12C28.4183 12 32 15.5817 32 20Z" fill="#fff"/>
               <path fill-rule="evenodd" clip-rule="evenodd" d="M24 26C27.3137 26 30 23.3137 30 20C30 16.6863 27.3137 14 24 14C20.6863 14 18 16.6863 18 20C18 23.3137 20.6863 26 24 26ZM24 28C28.4183 28 32 24.4183 32 20C32 15.5817 28.4183 12 24 12C19.5817 12 16 15.5817 16 20C16 24.4183 19.5817 28 24 28Z" fill="#fff"/>
             </svg>
             </span>
        </div>
        <a href="#" class="hamburguer" id="hamburguer-menu"
          ><span>Menu</span></a
        >
      </div>
      <nav
        id="menu"
        itemprop="mainEntityOfPage"
        itemscope
        itemtype="http://schema.org/SiteNavigationElement"
        class="hidden"
      >
        <ul>
          <li>
            <a
              href="index.html"
              itemprop="url"
              class="scroller outline"
              data-text="Inicio"
              data-url="#inicio"
              ><span itemprop="name">Inicio</span></a
            >
          </li>
          <li>
            <a
              href="nosotrosNew.html"
              itemprop="url"
              class="scroller outline"
              data-text="Nosotros"
              data-url="#nosotros"
              onclick="mostrarNosotrosCotizar();return false;"
              ><span itemprop="name">Nosotros</span></a
            >
          </li>
          <li>
            <a
              href="nosotrosNew.html#contacto"
              itemprop="url"
              class="scroller outline"
              data-text="Contacto"
              data-url="#contacto"
              ><span itemprop="name">Contacto</span></a
            > 
          </li>
          <li>
            <img
            src="./images/cerrarSesion.svg" 
            alt="Cerrar sesión" 
            id="cerrar-sesion-btn-menu"
            style="width:33px; height:40px; cursor:pointer; filter: invert(59%) sepia(94%) saturate(477%) hue-rotate(104deg) brightness(97%) contrast(92%);"
          />
          </li>
          <li>
  <span id="user-icon-menu" style="display:none; cursor:pointer; margin-top: -68px;">
    <!-- SVG de usuario -->
    <svg xmlns="http://www.w3.org/2000/svg" width="38" height="38" viewBox="0 0 48 48" fill="none">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M24 42C33.9411 42 42 33.9411 42 24C42 14.0589 33.9411 6 24 6C14.0589 6 6 14.0589 6 24C6 33.9411 14.0589 42 24 42ZM24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z" fill="#fff"/>
      <path d="M12 35.6309C12 34.5972 12.772 33.7241 13.7995 33.6103C21.515 32.7559 26.5206 32.8325 34.218 33.6287C35.2324 33.7337 36 34.5918 36 35.6116C36 36.1807 35.7551 36.7275 35.3262 37.1014C26.2414 45.0195 21.0488 44.9103 12.6402 37.1087C12.2306 36.7286 12 36.1897 12 35.6309Z" fill="#fff"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M34.1151 34.6234C26.4784 33.8334 21.5449 33.7587 13.9095 34.6042C13.3954 34.6612 13 35.1002 13 35.6309C13 35.9171 13.1187 36.1885 13.3204 36.3757C17.4879 40.2423 20.6461 41.9887 23.7333 41.9999C26.8309 42.0113 30.1592 40.2783 34.6691 36.3476C34.8767 36.1667 35 35.8964 35 35.6116C35 35.0998 34.6154 34.6752 34.1151 34.6234ZM13.6894 32.6164C21.4852 31.7531 26.5628 31.8315 34.3209 32.6341C35.8495 32.7922 37 34.0838 37 35.6116C37 36.465 36.6336 37.2884 35.9832 37.8553C31.4083 41.8426 27.598 44.0141 23.726 43.9999C19.8435 43.9857 16.2011 41.7767 11.9601 37.8418C11.3425 37.2688 11 36.4624 11 35.6309C11 34.0943 12.1487 32.787 13.6894 32.6164Z" fill="#fff"/>
      <path d="M32 20C32 24.4183 28.4183 28 24 28C19.5817 28 16 24.4183 16 20C16 15.5817 19.5817 12 24 12C28.4183 12 32 15.5817 32 20Z" fill="#fff"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M24 26C27.3137 26 30 23.3137 30 20C30 16.6863 27.3137 14 24 14C20.6863 14 18 16.6863 18 20C18 23.3137 20.6863 26 24 26ZM24 28C28.4183 28 32 24.4183 32 20C32 15.5817 28.4183 12 24 12C19.5817 12 16 15.5817 16 20C16 24.4183 19.5817 28 24 28Z" fill="#fff"/>
    </svg>
  </span>
  <span id="user-icon-header" ...> ... </span>
<div id="google-one-tap-anchor" style="position:relative;"></div>
</li>
        </ul> 
        <!-- Botón de cerrar menú hamburguesa (cruz) -->
        <a href="#" class="close-menu" id="close-menu" aria-label="Cerrar menú">
          <img
            src="./images/icons/close.svg"
            alt="Cerrar menú"
            width="32"
            height="29"
          />
        </a>
      </nav>
      <div class="menu-overlay" id="menu-overlay"></div>
    </header>
    <main>
      <div class="tituloysubtitulo">
        <h2>Cotizador online</h2>
        <h1>PASO <strong>1 DE 3</strong></h1></div>
      <section id="cotizar" class="cotizar-section">
      
         <div class="container">
          <!-- Paso 1 --> 
           
          <div id="step-1" class="step active">
           
            <div class="switch-container">
              <span class="switch-label-left" onclick="toggleSwitch(false)"
                >PERSONA</span
              >
              <label class="toggle-switch">
                <input type="checkbox" />
                <span class="switch-slider"></span>
              </label>
              <span class="switch-label-right" onclick="toggleSwitch(true)"
                >EMPRESA</span
              >
            </div>
            <div class="dni-container">
              <input
                type="text"
                class="dni-input"
                placeholder="DNI del solicitante"
              />
              <div class="search-icon-container">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="14"
                  height="14"
                  viewBox="0 0 14 14"
                >
                  <path
                    id="Vector"
                    d="M13.77,12.666,11.126,10.03A6.158,6.158,0,0,0,12.44,6.22a6.22,6.22,0,1,0-6.22,6.22,6.158,6.158,0,0,0,3.81-1.314l2.636,2.644a.781.781,0,1,0,1.1-1.1ZM1.555,6.22a4.665,4.665,0,1,1,1.366,3.3A4.665,4.665,0,0,1,1.555,6.22Z"
                    fill="#fff"
                  />
                </svg>
              </div>
              <!-- Mueve el loader aquí, antes del dropdown-content -->
              <div
                id="loader-smiley"
                class="loader-overlay"
                style="display: none"
              >
                <svg
                  role="img"
                  aria-label="Mouth and eyes come from 9:00 and rotate clockwise into position, right eye blinks, then all parts rotate and merge into 3:00"
                  class="smiley"
                  viewBox="0 0 128 128"
                  width="128px"
                  height="128px"
                >
                  <defs>
                    <clipPath id="smiley-eyes">
                      <circle
                        class="smiley__eye1"
                        cx="64"
                        cy="64"
                        r="8"
                        transform="rotate(-40,64,64) translate(0,-56)"
                      />
                      <circle
                        class="smiley__eye2"
                        cx="64"
                        cy="64"
                        r="8"
                        transform="rotate(40,64,64) translate(0,-56)"
                      />
                    </clipPath>
                    <linearGradient
                      id="smiley-grad"
                      x1="0"
                      y1="0"
                      x2="0"
                      y2="1"
                    >
                      <stop offset="0%" stop-color="#000" />
                      <stop offset="100%" stop-color="#fff" />
                    </linearGradient>
                    <mask id="smiley-mask">
                      <rect
                        x="0"
                        y="0"
                        width="128"
                        height="128"
                        fill="url(#smiley-grad)"
                      />
                    </mask>
                  </defs>
                  <g
                    stroke-linecap="round"
                    stroke-width="12"
                    stroke-dasharray="175.93 351.86"
                  >
                    <g>
                      <rect
                        fill="hsl(193,90%,50%)"
                        width="128"
                        height="64"
                        clip-path="url(#smiley-eyes)"
                      />
                      <g fill="none" stroke="hsl(193,90%,50%)">
                        <circle
                          class="smiley__mouth1"
                          cx="64"
                          cy="64"
                          r="56"
                          transform="rotate(180,64,64)"
                        />
                        <circle
                          class="smiley__mouth2"
                          cx="64"
                          cy="64"
                          r="56"
                          transform="rotate(0,64,64)"
                        />
                      </g>
                    </g>
                    <g mask="url(#smiley-mask)">
                      <rect
                        fill="hsl(223,90%,50%)"
                        width="128"
                        height="64"
                        clip-path="url(#smiley-eyes)"
                      />
                      <g fill="none" stroke="hsl(223,90%,50%)">
                        <circle
                          class="smiley__mouth1"
                          cx="64"
                          cy="64"
                          r="56"
                          transform="rotate(180,64,64)"
                        />
                        <circle
                          class="smiley__mouth2"
                          cx="64"
                          cy="64"
                          r="56"
                          transform="rotate(0,64,64)"
                        />
                      </g>
                    </g>
                  </g>
                </svg>
              </div>
              <div class="dropdown-content hidden">
                <div class="profile-header">
                  <img
                    src="./images/icons/user.svg"
                    alt="Icono de perfil"
                    class="profile-icon"
                  />
                  <h3 class="profile-name"></h3>
                </div>
                <div class="inner-box">
                  <h3 class="inner-box-title">
                    Posibilidad de gestión del crédito
                  </h3>
                  <div class="credit-viability-bar">
                    <div class="credit-indicator"></div>
                  </div>
                  <h4 class="credit-status-title credit-status-title-verde">
                    EVALUACIÓN POSITIVA
                  </h4>
                  <h4
                    class="credit-status-title credit-status-title-amarillo"
                    style="display: none; color: #ffdf00"
                  >
                    SUJETO A REVISIÓN
                  </h4>
                  <p class="credit-status-subtitle">
                    Es posible que el crédito se apruebe
                  </p>
                </div>
                <button
                  class="change-applicant-button"
                  onclick="hideDropdown()"
                >
                  <span>Cambiar solicitante</span>
                </button>
              </div>
            </div>
            <div class="confidentiality-text">
              Los datos solicitados son confidenciales y no se van a almacenar
              en ninguna base de datos.<br /><br />Al avanzar, el usuario acepta
              los <strong>Términos y Condiciones de Servicio.</strong>
            </div>
            <div class="navigation-buttons">
              <button class="back-button hidden" onclick="goToStep(1)"></button>
              <button class="next-button" onclick="goToStep(2)">
                <span class="next-text">Siguiente</span>
                <img
                  src="./images/icons/flecha.svg"
                  alt="flecha"
                  class="next-arrow"
                />
              </button>
            </div>
          </div>

          <!-- Paso 2 -->
          <div id="step-2" class="step hidden">
            <div class="contenedor-padre">
            <div class="options-container">
              <!-- Nuevo contenedor de opciones para Categoría -->
              <div class="custom-options-container">
                <div
                  class="custom-options-placeholder"
                  onclick="toggleCustomOptions('categoria-options')"
                >
                  Categoría
                </div>
                <div class="custom-options-extra hidden"></div>
                <!-- Nuevo div -->
                <div class="custom-options-wrapper">
                  <div id="categoria-options" class="custom-options hidden">
                    <div
                      class="custom-option"
                      onclick="selectCustomOption('Autos y Pickups', 'categoria-options')"
                    >
                      <img
                        src="./images/icons/auto.svg"
                        alt="Autos y Pickups"
                        class="option-icon"
                      />
                      Autos y Pickups
                    </div>
                    <div
                      class="custom-option"
                      onclick="selectCustomOption('Motos', 'categoria-options')"
                    >
                      <img
                        src="./images/icons/moto.svg"
                        alt="Motos"
                        class="option-icon"
                      />
                      Motos
                    </div>
                    <div
                      class="custom-option"
                      onclick="selectCustomOption('Utilitarios', 'categoria-options')"
                    >
                      <img
                        src="./images/icons/pickup1.svg"
                        alt="Utilitarios"
                        class="option-icon"
                      />
                      Utilitarios / SC / Furgon
                    </div>
                    <div
                      class="custom-option"
                      onclick="selectCustomOption('Camiones', 'categoria-options')"
                    >
                      <img
                        src="./images/icons/camion.svg"
                        alt="Camiones"
                        class="option-icon"
                      />
                      Camiones
                    </div>
                  </div>
                </div>
                
              </div>

              <!-- Nuevo contenedor de opciones para Año -->
              <div class="custom-options-container">
                <div
                  class="custom-options-placeholder"
                  onclick="toggleCustomOptions('anio-options')"
                >
                  Año
                </div>
                <div class="custom-options-extra hidden"></div>
                <!-- Nuevo div -->
                <div class="custom-options-wrapper">
                  <div id="anio-options" class="custom-options hidden">
                    <div class="custom-option" onclick="selectCustomOption('2025', 'anio-options')">2025</div>
                    <div class="custom-option" onclick="selectCustomOption('2024', 'anio-options')">2024</div>
                    <div class="custom-option" onclick="selectCustomOption('2023', 'anio-options')">2023</div>
                    <div class="custom-option" onclick="selectCustomOption('2022', 'anio-options')">2022</div>
                    <div class="custom-option" onclick="selectCustomOption('2021', 'anio-options')">2021</div>
                    <div class="custom-option" onclick="selectCustomOption('2020', 'anio-options')">2020</div>
                    <div class="custom-option" onclick="selectCustomOption('2019', 'anio-options')">2019</div>
                    <div class="custom-option" onclick="selectCustomOption('2018', 'anio-options')">2018</div>
                    <div class="custom-option" onclick="selectCustomOption('2017', 'anio-options')">2017</div>
                    <div class="custom-option" onclick="selectCustomOption('2016', 'anio-options')">2016</div>
                    <div class="custom-option" onclick="selectCustomOption('2015', 'anio-options')">2015</div>
                    <div class="custom-option" onclick="selectCustomOption('2014', 'anio-options')">2014</div>
                    <div class="custom-option" onclick="selectCustomOption('2013', 'anio-options')">2013</div>
                    <div class="custom-option" onclick="selectCustomOption('2012', 'anio-options')">2012</div>
                  </div>
                </div>
              </div>

              <!-- Nuevo contenedor de opciones para Marca -->
              <div class="custom-options-container">
                <div
                  class="custom-options-placeholder"
                  onclick="toggleCustomOptions('marca-options')"
                >
                  Marca
                </div>
                <div class="custom-options-extra hidden"></div>
                <!-- Nuevo div -->
                <div class="custom-options-wrapper">
                  <div id="marca-options" class="custom-options hidden">
                    <div class="custom-search-container hidden">
                      <!-- Nuevo buscador -->
                      <img src="./images/icons/lupita.svg" alt="Buscar" />
                      <input
                        type="text"
                        placeholder="Buscar marca..."
                        oninput="filterOptions('marca-options', this.value)"
                      />
                    </div>
                  </div>
                </div>
              </div>

              <!-- Nuevo contenedor de opciones para Modelo -->
              <div class="custom-options-container">
                <div
                  class="custom-options-placeholder"
                  onclick="toggleCustomOptions('modelo-options')"
                >
                  Modelo
                </div>
                <div class="custom-options-extra hidden"></div>
                <!-- Nuevo div -->
                <div class="custom-options-wrapper">
                  <div id="modelo-options" class="custom-options hidden">
                    <div class="custom-search-container hidden">
                      <!-- Nuevo buscador -->
                      <img src="./images/icons/lupita.svg" alt="Buscar" />
                      <input
                        type="text"
                        placeholder="Buscar modelo..."
                        oninput="filterOptions('modelo-options', this.value)"
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
            <div class="navigation-buttons">
              <button class="back-button" onclick="goToStep(1)">
                <img
                  src="./images/icons/FlechaNegra.svg"
                  alt="flecha"
                  class="next-arrow"
                />
              </button>
              <button class="next-button" onclick="goToStep(3)">
                <span class="next-text">Siguiente</span>
                <img
                  src="./images/icons/flecha.svg"
                  alt="flecha"
                  class="next-arrow"
                />
              </button>
            </div>
          </div>

          <!-- Paso 3 -->
          <div id="step-3" class="step hidden">
            <div class="container-step3">
              <div class="vehicle-summary">
                <img id="vehicle-logo" src="" alt="Logo de la marca" />
                <div class="vehicle-details">
                  <h3 id="vehicle-brand">Marca</h3>
                  <p id="vehicle-model">Modelo</p>
                  <p id="vehicle-year">Año</p>
                  <div id="leyenda-uso-particular-mobile" class="leyenda-uso-particular" style="display:none; color:#d00; font-weight:bold;">
                      NO USO COMERCIAL
                    </div>
                  <div id="leyenda-uso-particular" style="display:none; color:#d00; font-weight:bold;">
                NO USO COMERCIAL
                </div>
                </div>
              </div>
              <!-- Select de productos con clase específica -->
              <div
                id="product-select-container"
                class="custom-options-container product-select"
              >
                <div
                  class="custom-options-placeholder"
                  onclick="toggleCustomOptions('product-options')"
                >
                  Seleccionar Producto
                </div>
                <div class="custom-options-extra hidden"></div>
                <div class="custom-options-wrapper">
                  <div id="product-options" class="custom-options hidden">
                    <!-- Opciones dinámicas o estáticas -->
                    
                  </div>
                </div>
              </div>
              <!-- Nuevo div debajo del select de productos -->
              
              <div class="custom-summary">
                <h3 class="custom-summary-title">Máximo a financiar</h3>
                <span class="custom-summary-currency"></span>
                <span class="custom-summary-amount">Seleccioná producto</span>
              </div>
              <div class="custom-summary-input">
                <input
                 type="text"
                  inputmode="numeric"
                  pattern="[0-9]*"
                  class="net-finance-input"
                  placeholder="Monto neto a financiar"
                />
                
              </div>
              
            </div>
            <p class="min-amount-text"></p>
            <div class="navigation-buttons">
              <button class="back-button" onclick="goToStep(2)">
                <img
                  src="./images/icons/FlechaNegra.svg"
                  alt="flecha"
                  class="next-arrow"
                />
              </button>
              <button class="next-button" onclick="goToStep(4)">
                <span class="next-text">Siguiente</span>
                <img
                  src="./images/icons/flecha.svg"
                  alt="flecha"
                  class="next-arrow"
                />
              </button>
            </div>
          </div>

          <!-- Paso 4 - Nueva pantalla para cotización estimada -->
          <div id="step-4" class="step hidden">
            <div class="container-step4-desktop">
              <div>
                <div class="vehicle-summary">
                  <img id="vehicle-logo-step4" src="" alt="Logo de la marca" />
                  <div class="vehicle-details">
                    <h3 id="vehicle-brand-step4">Marca</h3>
                    <p id="vehicle-model-step4">Modelo</p>
                    <p id="vehicle-year-step4">Año</p>
                    <div id="leyenda-uso-particular-mobile-step4" class="leyenda-uso-particular" style="display:none; color:#d00; font-weight:bold;">
                      NO USO COMERCIAL
                    </div>
                    
                  </div>
                </div>
                <div class="custom-summary custom-summary-step4">
                  <h3 class="custom-summary-title">Monto neto a financiar</h3>
                  <span class="custom-summary-currency">$</span>
                  <span
                    id="custom-summary-amount-step4"
                    class="custom-summary-amount"
                    >0</span
                  >
                  <div
                    id="selected-product-step4"
                    class="selected-product"
                  ></div>
                </div>

                <div class="cuota-info-desktop-text">
                   <strong>CUOTA PROMEDIO TNA</strong> vigente a la fecha, sujeto a calificación del solicitante en cada entidad bancaria con las que opera <strong>LEVER SRL</strong>. No incluye impuestos de <strong>SELLOS DE PRENDA</strong>, ni <strong>SEGURO</strong> del bien.
                 </div>
                <div id="leyenda-uso-particular-step4" class="leyenda-uso-particular" style="display:none; color:#d00; font-weight:bold; font-size: 22px;
                       margin-left: 6px;
                       margin-top: 14px;
                       margin-bottom: -51px;">
                    NO USO COMERCIAL
                </div>
              </div>
              <div>
               <div class="scrollable-container">
                   <div class="scrollable-item" onclick="selectCuota(this)">
                    <span class="scrollable-text">12 CUOTAS</span>
                    <span class="scrollable-value">$1.455.555</span>
                   </div>
                   <div class="scrollable-item" onclick="selectCuota(this)">
                    <span class="scrollable-text">18 CUOTAS</span>
                    <span class="scrollable-value">$754.589</span>
                   </div>
                    <div class="scrollable-item" onclick="selectCuota(this)">
                    <span class="scrollable-text">24 CUOTAS</span>
                    <span class="scrollable-value">$452.245</span>
                   </div>
                   <!-- SOLO para la opción de 36 cuotas: layout especial en 2 columnas -->
                   <div
                    class="scrollable-item scrollable-item-36"
                    onclick="selectCuota(this)"
                   >
                    <div class="scrollable-item-36-left">
                      <div class="cuota-label-mas-elegida-inside">
                        <svg
                          id="Grupo_2619"
                          data-name="Grupo 2619"
                          xmlns="http://www.w3.org/2000/svg"
                          width="7.748"
                          height="7.42"
                          viewBox="0 0 7.748 7.42"
                          style="vertical-align: middle"
                        >
                          <g id="Grupo_2618" data-name="Grupo 2618">
                            <path
                              id="Trazado_780"
                              data-name="Trazado 780"
                              d="M5.136,2.323l2.278.2a.417.417,0,0,1,.221.694l-1.7,1.5a.648.648,0,0,0,.032.249c.116.6.392,1.373.445,1.951a.41.41,0,0,1-.567.47L3.92,6.237l-.057-.013L1.918,7.38a.411.411,0,0,1-.584-.463c.06-.653.4-1.43.475-2.091a.228.228,0,0,0,0-.109l-1.7-1.5a.417.417,0,0,1,.242-.7l2.257-.2L3.49.261A.411.411,0,0,1,4.24.229Z"
                              fill="#fec008"
                            />
                          </g>
                        </svg>
                        <span class="cuota-label-text-inside">MÁS ELEGIDA</span>
                      </div>
                      <span class="scrollable-text">36 CUOTAS</span>
                    </div>
                    <span class="scrollable-value">$254.784</span>
                   </div>
                   <div class="scrollable-item" onclick="selectCuota(this)">
                    <span class="scrollable-text">48 CUOTAS</span>
                    <span class="scrollable-value">$125.500</span>
                   </div>
                  
                   <div class="mensaje4">
                    <p id="select-cuota-message" class="hidden">
                      Seleccioná una opción para poder cotizar
                    </p>
                   </div>
                   <div class="cuota-info-container">
                    <button class="cuota-info-btn" onclick="document.getElementById('cuota-info-tooltip').classList.toggle('active')" title="Información de la cuota">?</button>
                      <div id="cuota-info-tooltip" class="cuota-info-tooltip">
                       CUOTA PROMEDIO TNA vigente a la fecha, sujeto a calificación del solicitante en cada entidad bancaria con las que opera LEVER SRL. No incluye impuestos de SELLOS DE PRENDA, ni SEGURO del bien.
                      </div>
                      
                   </div>
                   
                   
               </div>
               
             </div>
              
            </div>
            
            <div class="navigation-buttons">
              <button class="back-button" onclick="goToStep(3)">
                <img
                  src="./images/icons/FlechaNegra.svg"
                  alt="flecha"
                  class="next-arrow"
                />
                <span class="back-text">Modificar</span>
              </button>
              <button class="share-button">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="18"
                  viewBox="0 0 16 18"
                >
                  <g
                    id="Grupo_2606"
                    data-name="Grupo 2606"
                    transform="translate(-161.74 -654.288)"
                  >
                    <circle
                      id="Elipse_9"
                      data-name="Elipse 9"
                      cx="3"
                      cy="3"
                      r="3"
                      transform="translate(161.74 660.288)"
                      fill="#25d39d"
                    />
                    <circle
                      id="Elipse_10"
                      data-name="Elipse 10"
                      cx="3"
                      cy="3"
                      r="3"
                      transform="translate(171.74 654.288)"
                      fill="#25d39d"
                    />
                    <circle
                      id="Elipse_11"
                      data-name="Elipse 11"
                      cx="3"
                      cy="3"
                      r="3"
                      transform="translate(171.74 666.288)"
                      fill="#25d39d"
                    />
                    <line
                      id="Línea_14"
                      data-name="Línea 14"
                      y1="6.966"
                      x2="9.288"
                      transform="translate(165.483 656.709)"
                      fill="none"
                      stroke="#25d39d"
                      stroke-width="2"
                    />
                    <line
                      id="Línea_15"
                      data-name="Línea 15"
                      x2="9.288"
                      y2="6.966"
                      transform="translate(165.483 663.288)"
                      fill="none"
                      stroke="#25d39d"
                      stroke-width="2"
                    />
                  </g>
                </svg>
              </button>
              <button class="next-button" id="cotizar-ahora-btn">
                <span class="next-text">Avanzar</span>
                <img
                  src="./images/icons/flecha.svg"
                  alt="flecha"
                  class="next-arrow"
                />
              </button>
            </div>
          </div>
        </section>
      
    </main>
    
    <footer class="footer">
      <div class="footer-icons"><button class="inicio-button" href=""  onclick="limpiarFormularioPantalla1();resetearFormulariosPantalla2();limpiarFormularioPantalla3();goToStep(1);window.scrollTo(0,0);document.body.classList.remove('nosotros-cotizar-activo');document.querySelectorAll('main > section').forEach(function(sec){sec.classList.add('hidden');});document.getElementById('cotizar').classList.remove('hidden');">
        <img
          src="./images/icons/inicio1.svg"
          alt="inicio icon"
          class="inicio-icon"
        />
        <span class="inicio-text">Inicio</span>
      </button>
      <button class="new-button"  onclick="limpiarFormularioPantalla1();resetearFormulariosPantalla2();limpiarFormularioPantalla3();goToStep(1);window.scrollTo(0,0);document.body.classList.remove('nosotros-cotizar-activo');document.querySelectorAll('main > section').forEach(function(sec){sec.classList.add('hidden');});document.getElementById('cotizar').classList.remove('hidden');">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="19"
          height="19"
          viewBox="0 0 19 19"
        >
          <g
            id="Grupo_2"
            data-name="Grupo 2"
            transform="translate(-150 -733.5)"
          >
            <line
              id="Línea_1"
              data-name="Línea 1"
              y2="17"
              transform="translate(159.5 734.5)"
              fill="none"
              stroke="#15224f"
              stroke-linecap="round"
              stroke-width="2"
            />
            <line
              id="Línea_2"
              data-name="Línea 2"
              y2="17"
              transform="translate(168 743) rotate(90)"
              fill="none"
              stroke="#15224f"
              stroke-linecap="round"
              stroke-width="2"
            />
          </g>
        </svg>
      </button>
      <button class="another-button">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="25"
          height="26"
          viewBox="0 0 25 26"
        >
          <g
            id="Grupo_2608"
            data-name="Grupo 2608"
            transform="translate(-201 -28.221)"
          >
            <rect
              id="Rectángulo_794"
              data-name="Rectángulo 794"
              width="8"
              height="18"
              transform="translate(202 32.221)"
              fill="none"
              stroke="#A0A0A0"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
            />
            <rect
              id="Rectángulo_795"
              data-name="Rectángulo 795"
              width="8"
              height="18"
              transform="translate(217 32.221)"
              fill="none"
              stroke="#A0A0A0"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
            />
            <line
              id="Línea_16"
              data-name="Línea 16"
              y2="24"
              transform="translate(213.5 29.221)"
              fill="none"
              stroke="#A0A0A0"
              stroke-linecap="round"
              stroke-width="2"
            />
          </g>
        </svg>
      </button>
      <!-- Nuevo botón agregado -->
      <button class="message-button">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24.249"
          height="21.59"
          viewBox="0 0 19.249 16.59"
        >
          <g
            id="Grupo_6"
            data-name="Grupo 6"
            transform="translate(-318.376 -734.981)"
          >
            <path
              id="Trazado_6"
              data-name="Trazado 6"
              d="M245.5,735.981v11.1h13.764l3.485,3.485v-14.59Z"
              transform="translate(73.876)"
              fill="none"
              stroke="#A0A0A0"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
            />
            <g id="Grupo_5" data-name="Grupo 5" transform="translate(0 0.775)">
              <line
                id="Línea_6"
                data-name="Línea 6"
                x2="9"
                transform="translate(323.5 739.5)"
                fill="none"
                stroke="#A0A0A0"
                stroke-linecap="round"
                stroke-width="1"
              />
              <line
                id="Línea_7"
                data-name="Línea 7"
                x2="5"
                transform="translate(323.5 742.5)"
                fill="none"
                stroke="#A0A0A0"
                stroke-linecap="round"
                stroke-width="1"
              />
            </g>
          </g>
        </svg>
      </button>
    </div>
    </footer>

    <!-- Botón flotante inferior derecho -->
    <button class="floating-action-btn" aria-label="Acción rápida"
      onclick="window.open('https://wa.me/5493417049138?text=Hola%2C%20me%20contacto%20desde%20la%20web%2C%20necesito%20ayuda...','_blank'); return false;">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="29.255"
        height="25.053"
        viewBox="0 0 29.255 25.053"
      >
        <g id="Grupo_6" data-name="Grupo 6" transform="translate(1 1)">
          <path
            id="Trazado_6"
            data-name="Trazado 6"
            d="M245.5,735.98v17.547h21.749l5.506,5.506V735.98Z"
            transform="translate(-245.5 -735.98)"
            fill="none"
            stroke="#fff"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
          />
          <g
            id="Grupo_5"
            data-name="Grupo 5"
            transform="translate(6.517 6.786)"
          >
            <line
              id="Línea_6"
              data-name="Línea 6"
              x2="14.221"
              fill="none"
              stroke="#fff"
              stroke-linecap="round"
              stroke-width="1"
            />
            <line
              id="Línea_7"
              data-name="Línea 7"
              x2="7.901"
              transform="translate(0 4.74)"
              fill="none"
              stroke="#fff"
              stroke-linecap="round"
              stroke-width="1"
            />
          </g>
        </g>
      </svg>
    </button>

    <!-- Loader Smiley HTML (hidden by default) -->
    <div id="loader-smiley" class="loader-overlay" style="display: none">
      <svg
        role="img"
        aria-label="Mouth and eyes come from 9:00 and rotate clockwise into position, right eye blinks, then all parts rotate and merge into 3:00"
        class="smiley"
        viewBox="0 0 128 128"
        width="128px"
        height="128px"
      >
        <defs>
          <clipPath id="smiley-eyes">
            <circle
              class="smiley__eye1"
              cx="64"
              cy="64"
              r="8"
              transform="rotate(-40,64,64) translate(0,-56)"
            />
            <circle
              class="smiley__eye2"
              cx="64"
              cy="64"
              r="8"
              transform="rotate(40,64,64) translate(0,-56)"
            />
          </clipPath>
          <linearGradient id="smiley-grad" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#000" />
            <stop offset="100%" stop-color="#fff" />
          </linearGradient>
          <mask id="smiley-mask">
            <rect
              x="0"
              y="0"
              width="128"
              height="128"
              fill="url(#smiley-grad)"
            />
          </mask>
        </defs>
        <g
          stroke-linecap="round"
          stroke-width="12"
          stroke-dasharray="175.93 351.86"
        >
          <g>
            <rect
              fill="#2ADC9F"
              width="128"
              height="64"
              clip-path="url(#smiley-eyes)"
            />
            <g fill="none" stroke="#2ADC9F">
              <circle
                class="smiley__mouth1"
                cx="64"
                cy="64"
                r="56"
                transform="rotate(180,64,64)"
              />
              <circle
                class="smiley__mouth2"
                cx="64"
                cy="64"
                r="56"
                transform="rotate(0,64,64)"
              />
            </g>
          </g>
          <g mask="url(#smiley-mask)">
            <rect
              fill="#2ADC9F"
              width="128"
              height="64"
              clip-path="url(#smiley-eyes)"
            />
            <g fill="none" stroke="#2ADC9F">
              <circle
                class="smiley__mouth1"
                cx="64"
                cy="64"
                r="56"
                transform="rotate(180,64,64)"
              />
              <circle
                class="smiley__mouth2"
                cx="64"
                cy="64"
                r="56"
                transform="rotate(0,64,64)"
              />
            </g>
          </g>
        </g>
      </svg>
    </div>

    <!-- Modal de login (oculto por defecto) -->
<div id="modal-login-overlay" class="modal-login-overlay" style="display:none;">
  <div class="modal-login-content">
    <button type="button" class="modal-login-close" id="cerrar-modal-login">&times;</button>
    <div class="modal-login-form-container">
      <form id="modal-login-form" class="modal-login-form">
        <h2 class="modal-login-title" style="margin-bottom: 28px;
    font-weight: 700;
    color: #15224f;
    font-size: 1.3em;
    letter-spacing: 3.5px;">
  INICIAR SESIÓN PARA CONTINUAR
</h2>
        <div class="modal-login-options">
          <div class="modal-login-option">
            <a href="#" id="modal-google-login-btn" class="modal-login-google-btn">
              <span class="modal-login-google-icon">
                <!-- Google SVG -->
                <svg width="24" height="24" viewBox="0 0 16 16" fill="none">
                  <g clip-path="url(#clip0_643_9687)">
                    <path d="M8.00018 3.16667C9.18018 3.16667 10.2368 3.57333 11.0702 4.36667L13.3535 2.08333C11.9668 0.793333 10.1568 0 8.00018 0C4.87352 0 2.17018 1.79333 0.853516 4.40667L3.51352 6.47C4.14352 4.57333 5.91352 3.16667 8.00018 3.16667Z" fill="#EA4335"></path>
                    <path d="M15.66 8.18335C15.66 7.66002 15.61 7.15335 15.5333 6.66669H8V9.67335H12.3133C12.12 10.66 11.56 11.5 10.72 12.0667L13.2967 14.0667C14.8 12.6734 15.66 10.6134 15.66 8.18335Z" fill="#4285F4"></path>
                    <path d="M3.51 9.53001C3.35 9.04668 3.25667 8.53334 3.25667 8.00001C3.25667 7.46668 3.34667 6.95334 3.51 6.47001L0.85 4.40668C0.306667 5.48668 0 6.70668 0 8.00001C0 9.29334 0.306667 10.5133 0.853333 11.5933L3.51 9.53001Z" fill="#FBBC05"></path>
                    <path d="M8.0001 16C10.1601 16 11.9768 15.29 13.2968 14.0633L10.7201 12.0633C10.0034 12.5467 9.0801 12.83 8.0001 12.83C5.91343 12.83 4.14343 11.4233 3.5101 9.52667L0.850098 11.59C2.1701 14.2067 4.87343 16 8.0001 16Z" fill="#34A853"></path>
                  </g>
                  <defs>
                    <clipPath id="clip0_643_9687">
                      <rect width="16" height="16" fill="white"></rect>
                    </clipPath>
                  </defs>
                </svg>
              </span>
              <span>Ingresá con Google</span>
            </a>
          </div>
        </div>
        <p class="modal-login-separator"><span>O ingresá con tu cuenta</span></p>
        <div class="modal-login-input-box">
          <label for="modal-email">Correo</label>
          <input type="email" id="modal-email" required />
        </div>
        <div class="modal-login-input-box">
          <div class="modal-login-password-title">
            <label for="modal-password">Contraseña</label>
            <a href="#" id="abrir-modal-olvide" class="modal-login-forgot-link">¿Olvidaste tu contraseña?</a>
          </div>
          <input type="password" id="modal-password" required />
        </div>
        <button type="submit" class="modal-login-btn-primary">Iniciar sesión</button>
        <p class="modal-login-sign-up">¿No tienes una cuenta? <a href="register.html">Regístrate</a></p>
        <div id="modal-login-error" class="modal-login-error" style="display:none;"></div>
      </form>
    </div>
  </div>
</div>


<!-- Modal para recuperación de contraseña -->
<div id="modal-olvide" class="modal-overlay-olvide" style="display:none;">
  <div class="modal-content-olvide">
    <button type="button" class="modal-close-olvide" id="cerrar-modal-olvide">&times;</button>
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail-check h-12 w-12 text-[#626CD6] dark:text-white" style="display:block;margin:0 auto 1em auto;">
      <path d="M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8"></path>
      <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
      <path d="m16 19 2 2 4-4"></path>
    </svg>
    <h3 class="modal-title-olvide">¿Olvidaste tu contraseña?</h3>
    <span class="modal-desc-olvide">Ingresa tu correo electrónico y te enviaremos instrucciones para restablecerla.</span>
    <form id="form-olvide">
      <div class="input_box_olvide">
        <label for="olvide-email" class="label-olvide">Correo electrónico</label>
        <input type="email" id="olvide-email" class="input-olvide" required />
      </div>
      <button type="submit" class="btn-primary-olvide">Enviar instrucciones</button>
    </form>
    <div id="olvide-mensaje" class="modal-message-olvide"></div>
  </div>
</div>

    <script>

function mostrarModalCompletarPerfil(email) {
  // Elimina cualquier modal anterior
  const anterior = document.getElementById("modal-completar-perfil");
  if (anterior) anterior.remove();

// Bloquea interacción con el fondo
  document.body.classList.add("modal-bloqueado");

  // Crea el modal con la misma estructura y clases
  const modal = document.createElement("div");
 modal.className = "modal-overlay-perfil";
 modal.id = "modal-completar-perfil";
 modal.innerHTML = `
  <div class="modal-content-perfil">
    
      <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-plus" style="display:block;margin:0 auto 1em auto;">
        <circle cx="12" cy="8" r="5"></circle>
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
       
      </svg>
      <h3 style="font-size: 21px; margin-bottom: 9px;">Completa tu perfil</h3>
      <span style="opacity: 0.7;">Por favor, ingresa los siguientes datos por ÚNICA VEZ para continuar:</span>
      <form id="form-completar-perfil" style="margin-top:1em;">
        <div class="input_box">
          <label for="agencia">Agencia</label>
          <input type="text" id="agencia" required />
        </div>
        <div class="input_box">
          <label for="telefono">Teléfono</label>
          <input type="text" id="telefono" required />
        </div>
        <button type="submit" class="btn-primary">Guardar y continuar</button>
        <div id="completar-perfil-mensaje" class="modal-message"></div>
      </form>
    </div>
  `;
  document.body.appendChild(modal);

  

  document.getElementById("form-completar-perfil").addEventListener("submit", function(e) {
    e.preventDefault();
    const agencia = document.getElementById("agencia").value.trim();
    const telefono = document.getElementById("telefono").value.trim();

    fetch(window.APP_CONFIG.API_URL + "/api/completarPerfilGoogle", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email, agencia, telefono })
    })
    .then(res => res.json())
    .then(data => {
      const msg = document.getElementById("completar-perfil-mensaje");
      if (data.success) {
        msg.textContent = "¡Perfil actualizado!";
        msg.style.color = "green";
        setTimeout(() => {
          modal.remove();
          document.body.classList.remove("modal-bloqueado");
          location.reload();
        }, 800);
      } else {
        msg.textContent = data.message || "Error al actualizar";
        msg.style.color = "red";
      }
    })
    .catch(() => {
      const msg = document.getElementById("completar-perfil-mensaje");
      msg.textContent = "Error de conexión";
      msg.style.color = "red";
    });
  });
}

</script>
    
    <script src="config.js"></script>
    <script src="cotizar.js"></script>
    <!-- Agregar html2canvas desde CDN antes del cierre de </body> -->
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <link
      rel="stylesheet"
      href="https://github.hubspot.com/odometer/themes/odometer-theme-default.css"
    />
    <script src="https://github.hubspot.com/odometer/odometer.js"></script>
    <script src="js/app.min.js"></script>
    
    <script> 
    
   function bloquearTodosLosSwitch() {
  document.querySelectorAll(".toggle-switch input").forEach(s => {
    s.checked = false;
    s.disabled = true;
  });
}
document.addEventListener("DOMContentLoaded", bloquearTodosLosSwitch);
const observer = new MutationObserver(bloquearTodosLosSwitch);
observer.observe(document.body, { childList: true, subtree: true });
</script>
    <!-- MODAL SELECCIÓN DE PERSONA POR DNI -->
    <div id="modal-personas-dni" class="modal-overlay hidden" style="display:none;">
      <div class="modal-content" >
        <div class="modal-title" >Seleccioná la persona correcta</div>
        <div class="modal-subtitle" >
          Se encontraron varias personas con el mismo DNI.<br>
          Elegí a quién corresponde la consulta:
        </div>
        <div class="clients-list" id="modal-personas-list" >
          <!-- Aquí se insertan los botones de personas dinámicamente -->
        </div>
        <button class="modal-close-btn" id="modal-personas-close" >Cancelar</button>
      </div>
    </div>
    <script>
    document.addEventListener("DOMContentLoaded", function () {
  const btns = [
    document.getElementById("cerrar-sesion-btn-header"),
    document.getElementById("cerrar-sesion-btn-menu")
  ];
  btns.forEach(btn => {
    if (btn) {
      btn.addEventListener("click", function () {
        // Llama al logout del backend
        fetch(window.APP_CONFIG.API_URL + "/api/logout", {
          method: "POST",
          credentials: "include"
        }).finally(() => {
          sessionStorage.removeItem("user_email");
          // Redirige a index.html para mostrar el modal de login
          window.location.href = "https://lever.com.ar";
        });
      });
    }
  });
});
</script>
<script>

  document.addEventListener("DOMContentLoaded", function () {
  // Cerrar modal login
  document.getElementById("cerrar-modal-login").onclick = function () {
    document.getElementById("modal-login-overlay").style.display = "none";
    document.body.classList.remove("modal-login-blur");
// Limpia el input de DNI
  document.querySelector('.dni-input').value = "";

  // Deshabilita la lupa y aplica el estilo gris
  const lupa = document.querySelector('.search-icon-container');
  lupa.classList.add('disabled');
  lupa.style.pointerEvents = "none";
  lupa.style.opacity = "0.5";
    
  };

  const API_BASE =
  window.location.hostname === "localhost" ||
  window.location.hostname === "127.0.0.1"
    ? "http://localhost:5000/api"
    : "https://api.lever.com.ar/api";

  // Login con Google
  document.getElementById("modal-google-login-btn").onclick = function (e) {
    e.preventDefault();
    console.log(API_BASE)
    window.location.href = "https://api.lever.com.ar/auth/google";
  };

  // Login con email/contraseña
  document.getElementById("modal-login-form").onsubmit = function (e) {
    e.preventDefault();
    const email = document.getElementById("modal-email").value.trim();
    const password = document.getElementById("modal-password").value;
    fetch(`${API_BASE}/loginAgencias`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email, password }),
      credentials: "include"
    })
      .then(res => res.json())
      .then(data => {
        if (data.success) {
          document.getElementById("modal-login-overlay").style.display = "none";
          document.body.classList.remove("modal-login-blur");
          // Opcional: guardar email en sessionStorage
          sessionStorage.setItem("user_email", data.user.email);
          // Avanzar a paso 2
          goToStep(2);

           // AGREGA ESTA LÍNEA:
         window.location.reload(); 
        } else {
          const err = document.getElementById("modal-login-error");
          err.textContent = data.message || "Credenciales incorrectas";
          err.style.display = "block";
        }
      })
      .catch(() => {
        const err = document.getElementById("modal-login-error");
        err.textContent = "Error de conexión";
        err.style.display = "block";
      });
  };
});

document.addEventListener("DOMContentLoaded", async function () {
  const userIcon = document.getElementById("user-icon-header");
  const cerrarSesionBtn = document.getElementById("cerrar-sesion-btn-header");

  // Chequear sesión al cargar la web
  const res = await fetch(`${API_BASE}/check-session`, { credentials: "include" });
  const data = await res.json();

  if (data.success) {
    // Usuario logueado: mostrar botón cerrar sesión, ocultar icono usuario
    if (cerrarSesionBtn) cerrarSesionBtn.style.display = "inline-block";
    if (userIcon) userIcon.style.display = "none";
  } else {
    // No logueado: mostrar icono usuario, ocultar cerrar sesión
    if (cerrarSesionBtn) cerrarSesionBtn.style.display = "none";
    if (userIcon) userIcon.style.display = "inline-block";
  }

  // Al hacer click en el icono usuario, mostrar modal login
  if (userIcon) {
    userIcon.onclick = function () {
      document.getElementById("modal-login-overlay").style.display = "flex";
      document.body.classList.add("modal-login-blur");
    };
  }
});
document.addEventListener("DOMContentLoaded", async function () {
  const userIconHeader = document.getElementById("user-icon-header");
  const cerrarSesionBtnHeader = document.getElementById("cerrar-sesion-btn-header");
  const userIconMenu = document.getElementById("user-icon-menu");
  const cerrarSesionBtnMenu = document.getElementById("cerrar-sesion-btn-menu");

  // Chequear sesión al cargar la web
  const res = await fetch(`${API_BASE}/check-session`, { credentials: "include" });
  const data = await res.json();

  if (data.success) {
    // Usuario logueado: mostrar botón cerrar sesión, ocultar icono usuario
    if (cerrarSesionBtnHeader) cerrarSesionBtnHeader.style.display = "inline-block";
    if (userIconHeader) userIconHeader.style.display = "none";
    if (cerrarSesionBtnMenu) cerrarSesionBtnMenu.style.display = "inline-block";
    if (userIconMenu) userIconMenu.style.display = "none";
  } else {
    // No logueado: mostrar icono usuario, ocultar cerrar sesión
    if (cerrarSesionBtnHeader) cerrarSesionBtnHeader.style.display = "none";
    if (userIconHeader) userIconHeader.style.display = "inline-block";
    if (cerrarSesionBtnMenu) cerrarSesionBtnMenu.style.display = "none";
    if (userIconMenu) userIconMenu.style.display = "inline-block";
  }
 
  if (data.success && data.necesitaCompletarPerfil === true) {
  mostrarModalCompletarPerfil(data.user.email);
}

  // Al hacer click en el icono usuario del header o menú, mostrar modal login
  if (userIconHeader) {
    userIconHeader.onclick = function () {
      document.getElementById("modal-login-overlay").style.display = "flex";
      document.body.classList.add("modal-login-blur");
    };
  }
  if (userIconMenu) {
  userIconMenu.onclick = function () {
    document.getElementById("modal-login-overlay").style.display = "flex";
    document.body.classList.add("modal-login-blur");
    // Cierra el menú hamburguesa automáticamente
    const menu = document.getElementById("menu");
    menu.classList.add("hidden");
    menu.classList.remove("mobile-active"); // <-- Esto es lo que faltaba
    document.getElementById("menu-overlay").classList.remove("active");
  };
}
});
document.addEventListener("keydown", function(e) {
  if (e.key === "Escape") {
    const modal = document.getElementById("modal-login-overlay");
    if (modal && modal.style.display === "flex") {
      modal.style.display = "none";
      document.body.classList.remove("modal-login-blur");
      // Limpia el input de DNI
      const dniInput = document.querySelector('.dni-input');
      if (dniInput) dniInput.value = "";
      // Deshabilita la lupa y aplica el estilo gris
      const lupa = document.querySelector('.search-icon-container');
      if (lupa) {
        lupa.classList.add('disabled');
        lupa.style.pointerEvents = "none";
        lupa.style.opacity = "0.5";
      }
    }
  }
});


document.addEventListener("DOMContentLoaded", function () {
  // Abrir modal
  const abrirOlvide = document.getElementById("abrir-modal-olvide");
  if (abrirOlvide) {
    abrirOlvide.addEventListener("click", function(e) {
      e.preventDefault();
      document.getElementById("modal-login-overlay").style.display = "none";
      document.getElementById("modal-olvide").style.display = "flex";
      document.getElementById("olvide-mensaje").style.display = "none";
      document.getElementById("form-olvide").reset();
    });
  }

  // Cerrar modal
  const cerrarOlvide = document.getElementById("cerrar-modal-olvide");
  if (cerrarOlvide) {
    cerrarOlvide.addEventListener("click", function() {
      document.getElementById("modal-olvide").style.display = "none";
      document.body.classList.remove("modal-login-blur");
    });
  }

  // Enviar solicitud de recuperación
  const formOlvide = document.getElementById("form-olvide");
  if (formOlvide) {
    formOlvide.addEventListener("submit", function(e) {
      e.preventDefault();
      const email = document.getElementById("olvide-email").value.trim();
      fetch(`${API_BASE}/forgot-password`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ email }),
      })
        .then(res => res.json())
        .then(data => {
          const msg = document.getElementById("olvide-mensaje");
          msg.style.display = "block";
          msg.style.color = data.success ? "green" : "red";
          msg.textContent = data.message || (data.success ? "Te enviamos un correo para recuperar tu contraseña." : "No se pudo enviar el correo.");
          if (data.success) formOlvide.reset();
        })
        .catch(() => {
          const msg = document.getElementById("olvide-mensaje");
          msg.style.display = "block";
          msg.style.color = "red";
          msg.textContent = "Error de conexión";
        });
    });
  }
});
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
  // Mostrar One Tap solo si NO hay sesión
  fetch(`${API_BASE}/check-session`, { credentials: "include" })
    .then(res => res.json())
    .then(data => {
      if (!data.success) {
        // Inicializa Google One Tap
        window.googleOneTapInitialized = false;
        window.initGoogleOneTap = function() {
          if (window.googleOneTapInitialized) return;
          window.googleOneTapInitialized = true;
          google.accounts.id.initialize({
            client_id: "323307585746-4vkqpvd70tnv1ck54r941fqoo2j1ivq2.apps.googleusercontent.com",
            callback: handleGoogleCredentialResponse,
          });
          google.accounts.id.prompt(notification => {}, {
            parentId: "google-one-tap-anchor"
          });
        };
        // Espera a que el script de Google esté listo
        if (window.google && google.accounts && google.accounts.id) {
          window.initGoogleOneTap();
        } else {
          window.addEventListener("google-loaded", window.initGoogleOneTap);
        }
      }
    });

  // Oculta One Tap si el usuario abre el modal de login manualmente
  const userIconHeader = document.getElementById("user-icon-header");
  if (userIconHeader) {
    userIconHeader.onclick = function () {
      document.getElementById("modal-login-overlay").style.display = "flex";
      document.body.classList.add("modal-login-blur");
      if (window.google && google.accounts && google.accounts.id) {
        google.accounts.id.cancel();
      }
    };
  }
});

// Maneja la respuesta de Google One Tap
function handleGoogleCredentialResponse(response) {
  fetch(`${API_BASE}/google-one-tap`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ credential: response.credential }),
    credentials: "include"
  })
    .then(res => res.json())
    .then(data => {
      if (data.success) {
        window.location.reload();
      } else {
        alert("No se pudo iniciar sesión con Google.");
      }
    });
}

// Notifica cuando el script de Google está listo
window.onload = function() {
  if (window.google && google.accounts && google.accounts.id) {
    window.dispatchEvent(new Event("google-loaded"));
  }
};
</script>
<script>
window.toggleSwitch = function(isEmpresa) {
  // Bloqueo provisorio: solo permitir PERSONA
  if (isEmpresa) {
    // No hacer nada si intentan cambiar a EMPRESA
    return;
  }
  // Si es PERSONA, ejecutá el código original (si lo necesitás)
  const switchInput = document.querySelector(".toggle-switch input");
  if (switchInput) {
    switchInput.checked = false;
    switchInput.disabled = true;
  }
  // Si tu función original hacía más cosas para PERSONA, podés agregarlas acá
};

</script>

<!-- Modal requisitos "Seguro Liberado - Fija" -->
<!-- Modal requisitos "Seguro Liberado - Fija" -->
<div id="modal-seguro-liberado" class="modal-seguro-liberado-overlay" style="display:none;">
  <div class="modal-seguro-liberado-content">
    <button type="button" class="modal-seguro-liberado-close" id="cerrar-modal-seguro-liberado" aria-label="Cerrar">&times;</button>
    <img src="./images/form.svg" alt="Formulario" class="modal-seguro-liberado-svg" style="width:54px;height:54px;display:block;margin:0 auto 1em auto;">
    <h3 class="modal-seguro-liberado-title">Documentación necesaria</h3>
    <span class="modal-seguro-liberado-desc">Para carga y resolución del crédito es necesario tener:</span>
    <ul class="modal-seguro-liberado-list">
  <li><span class="dot"></span><b>Foto DNI frente y dorso</b></li>
  <li><span class="dot"></span><b>Estado civil</b></li>
  <li><span class="dot"></span><b>Email real</b></li>
  <li><span class="dot"></span><b>Celular real</b></li>
  <li><span class="dot"></span><b>Foto título frente y dorso</b></li>
</ul>
    <button class="modal-seguro-liberado-btn" id="aceptar-modal-seguro-liberado">Entendido</button>
  </div>
</div>

<style>
/* Modal Seguro Liberado - Fija (estilo igual a olvide contraseña) */
.modal-seguro-liberado-overlay {
  display: none;
  position: fixed;
  z-index: 3000;
  left: 0; top: 0; width: 100vw; height: 100vh;
  background: rgba(20,30,40,0.55);
  align-items: center;
  justify-content: center;
}
.modal-seguro-liberado-content {
  background: #fff;
  border-radius: 18px;
  padding: 2.5em 2.2em 2em 2.2em;
  box-shadow: 0 8px 32px rgba(0,0,0,0.18);
  max-width: 343px;
  width: 94vw;
  position: relative;
  text-align: center;
  font-family: 'Montserrat', Arial, sans-serif;
  animation: modalIn 0.22s;
}
.modal-seguro-liberado-svg {
  margin-bottom: 1em;
}
.modal-seguro-liberado-title {
  font-size: 1.35em;
  color: #15224f;
  margin-bottom: 0.4em;
  font-weight: 700;
  letter-spacing: 0.5px;
}
.modal-seguro-liberado-desc {
  color: #666;
  font-size: 1em;
  margin-bottom: 1.2em;
  display: block;
}
.modal-seguro-liberado-list {
  text-align: left;
  font-size: 1em;
  color: #222;
  margin-bottom: 1.7em;
  padding-left: 0;
  list-style: none;
}
.modal-seguro-liberado-list li {
  margin-bottom: 0.8em;
  font-weight: 500;
  padding-left: 0.2em;
}
.modal-seguro-liberado-btn {
  width: 100%;
  font-size: 1.08em;
  padding: 0.85em 0;
  border-radius: 8px;
  background: #2adc9f;
  color: #fff;
  font-weight: 700;
  border: none;
  box-shadow: 0 2px 12px rgba(42,220,159,0.07);
  transition: background 0.18s;
  margin-top: 0.5em;
}
.modal-seguro-liberado-list .dot {
  display: inline-block;
  width: 7px;
  height: 7px;
  background: #2adc9f;
  border-radius: 50%;
  margin-right: 10px;
  vertical-align: middle;
}
.modal-seguro-liberado-btn:hover {
  background: #00f09c;
}
.modal-seguro-liberado-close {
  position: absolute;
  top: 13px;
  right: 18px;
  background: none;
  border: none;
  font-size: 1.7em;
  color: #b0b0b0;
  cursor: pointer;
  transition: color 0.2s;
  z-index: 2;
}
.modal-seguro-liberado-close:hover {
  color: #222;
}
@media (max-width: 600px) {
  .modal-seguro-liberado-content {
    padding: 1.2em 1.7em 1.1em 1.7em;
    max-width: 60vw;
  }
  .modal-seguro-liberado-title {
    font-size: 1em;
  }
  .modal-seguro-liberado-list {
    font-size: 0.98em;
  }
}
</style>

<script>
(function() {
  let modalMostrado = false;

  function mostrarModalSeguroLiberado() {
    if (modalMostrado) return;
    const modal = document.getElementById("modal-seguro-liberado");
    if (modal) {
      modal.style.display = "flex";
      document.body.classList.add("modal-bloqueado");
      modalMostrado = true;
    }
  }
  function cerrarModalSeguroLiberado() {
    const modal = document.getElementById("modal-seguro-liberado");
    if (modal) modal.style.display = "none";
    document.body.classList.remove("modal-bloqueado");
  }

  // Espera a que el DOM esté listo para asignar los listeners
  document.addEventListener("DOMContentLoaded", function() {
    document.getElementById("cerrar-modal-seguro-liberado").onclick = cerrarModalSeguroLiberado;
    document.getElementById("aceptar-modal-seguro-liberado").onclick = cerrarModalSeguroLiberado;
  });

  // Hookea goToStep solo para el paso 4
  if (window.goToStep) {
    const originalGoToStep = window.goToStep;
    window.goToStep = function(step) {
      originalGoToStep.apply(this, arguments);
      if (step === 4) {
        setTimeout(function() {
          const producto = document.getElementById("selected-product-step4");
          if (
            producto &&
            producto.textContent &&
            producto.textContent.toLowerCase().includes("seguro liberado") &&
            producto.textContent.toLowerCase().includes("fija")
          ) {
            modalMostrado = false; // Permite mostrarlo de nuevo si vuelve a paso 4
            mostrarModalSeguroLiberado();
          }
        }, 200);
      }
    };
  }

  // Si ya está en paso 4 al cargar (por recarga)
  document.addEventListener("DOMContentLoaded", function() {
    if (
      document.getElementById("step-4") &&
      !document.getElementById("step-4").classList.contains("hidden")
    ) {
      setTimeout(function() {
        const producto = document.getElementById("selected-product-step4");
        if (
          producto &&
          producto.textContent &&
          producto.textContent.toLowerCase().includes("seguro liberado") &&
          producto.textContent.toLowerCase().includes("fija")
        ) {
          modalMostrado = false;
          mostrarModalSeguroLiberado();
        }
      }, 200);
    }
  });
})();
</script>
</body>
  
</html>